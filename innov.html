<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>WA- EDP</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="assets/img/browning.jpg" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=https://fonts.googleapis.com/css?family=Inconsolata:400,500,600,700|Raleway:400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">

</head>

<body>



  <nav class="navbar navbar-light custom-navbar">
    <div class="container">
      <a class="navbar-brand" href="index.html">Washieu Anan</a>
        <span></span>
      </a>
    </div>
  </nav>

  <main id="main">

    <section class="section">
      <div class="container">
        <div class="row mb-4 align-items-center">
          <div class="col-md-6" data-aos="fade-up">
            <h2>Pure Pursuit: Engineering Design Process</h2>
            <p>Achieving a pure pursuit algorithm with motion profiling. </p>
          </div>
        </div>
      </div>

      <div class="site-section pb-0">
        <div class="container">
          <div class="row align-items-stretch">
            <div class="col-md-8" data-aos="fade-up">
              <img src="assets/img/pure_pursuit.png" alt="Image" class="img-fluid">
            </div>
            <br>
            &nbsp;
            <!-- <div class="col-md-8" data-aos="fade-up">
              <iframe width="650" height="400" src="https://www.youtube.com/embed/0t3wGQIypRg" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div> -->
            <br>
            <div class="col-md-4 ml-auto" data-aos="fade-up" data-aos-delay="100">
              <div class="sticky-content">
                <h3 class="h3">Thinking</h3>
                <p class="mb-4"><span class="text-muted">Existing Pure Pursuit Algorithms</span></p>

                <div class="mb-5">
                  <p>
                    There are several solutions to Pure Pursuit. FTC Team 11115 Gluten Free has an excellent <a href="https://www.youtube.com/watch?v=3l7ZNJ21wMo&t=486s">tutorial</a> on concepts behind Pure Pursuit. There are also libraries like <a href="https://learnroadrunner.com/">RoadRunner</a> and <a>FTCLib</a> that provide out-of-the-box solutions for vector-based movement. I've looked into both 11115's tutorial series and the libraries aforementioned but I would like to explore some of the deeper concepts of pure pursuit and how we can build a robust path-follower for FTC. 
                    The biggest problem with pure pursuit is the lack of motion profiling. This means that the robot cannot account for its instantaneous velocities and accelerations at any given point. The beginning and ends of paths do not speed up or slow down correctly. Is there a way to improve the existing pure pursuit algorithm to include motion profiling? Do solutions already exists? If so, are they adaptable to FTC-use? 
                    These are the questions I will be exploring as I try to come up with a solution. 

                  </p>

                </div>

                <p class="mb-4"><span class="text-muted">Research</span></p>

                <div class="mb-5">
                  <p>I have been looking into a few papers that concern Pure Pursuit alongside looking at the repositories of some other FRC/FTC teams and how they implemented Pure Pursuit. 

                    Pure Pursuit is an extremely old algorithm that has many papers written on it. Here are some that I looked at: 
                    
                    <ul>
                      <li>Coulter, R. Craig. Implementation of the pure pursuit path tracking algorithm. Carnegie-Mellon UNIV Pittsburgh PA Robotics INST, 1992.</li>
                      <li> Zeng, Michael. "PI (t) D (t) Control and Motion Profiling for Omnidirectional Mobile Robots." arXiv preprint arXiv:2110.09707 (2021).</li>
                      <li>Wang, Wei-Jen, Tusng-Ming Hsu, and Tzu-Sung Wu. "The improved pure pursuit algorithm for autonomous driving advanced system." 2017 IEEE 10th International Workshop on Computational Intelligence and Applications (IWCIA). IEEE, 2017.</li>
                      <li>Chen, Yuanpeng, et al. "Optimization of pure pursuit controller based on pid controller and low-pass filter." 2018 21st International Conference on Intelligent Transportation Systems (ITSC). IEEE, 2018.</li>
                      <li>Peng, Mingxing, et al. "Imitative Reinforcement Learning Fusing Vision and Pure Pursuit for Self-driving." 2020 IEEE International Conference on Robotics and Automation (ICRA). IEEE, 2020.</li>
                    </ul>
                    
                   
                    <br>
                    The papers provide a great insight as to how they implement the Pure Pursuit algorithm and some of the improvements that they have made. I was planning on using a PID-controller already but the implementation of a low-pass filter seems really interesting to me. I'll see what we can achieve by using a low pass filter or a Kalman Filter. 
                    
              
                    Teams that have implemented Pure Pursuit do not include motion profiling. Don't get me wrong, pure pursuit works great for them and they have been far more successful with autonomous than I will be this year but I believe motion profiling can give the edge in speed/time for autonomous operation. 

                  </p>

                </div>



                <p class="mb-4"><span class="text-muted">Math</span></p>
                <div class="col-md-8" data-aos="fade-up">
                  <p>Basis Of Pure Pursuit: Waypoint. Waypoint is a vector that can possess either 3 or 4 elements (x, y, heading, and optional: velocity). Each PP-Path contains several waypoints. </p>
                  <img src="assets/img/engineering_design_process/IMG_0164.jpg" alt="Image" class="img-responsive" width="900" height="600">
                </div>
                <br>
                <div class="col-md-8" data-aos="fade-up">
                  <p>Pure Pursuit Motor Power Calculations: Using the current robot's localization vector and the target vector. Utilizing basic trigonometric and mathematical equations, we are able to obtain the appropriate power powers to assign to the motors. These calculations are based on the kinematics of mecanum drive. </p>
                  <img src="assets/img/engineering_design_process/IMG_0165.jpg" alt="Image" class="img-responsive" width="900" height="700">
                </div>
                <br>
                <div class="col-md-8" data-aos="fade-up">
                  <p>Interpolation of Target Velocity for Motion Profiling: Equations based on the kinematics of mecanum drive. </p>
                  <img src="assets/img/engineering_design_process/IMG_0166.jpg" alt="Image" class="img-responsive" width="900"height="900">
                </div>
                <br>
                <div class="col-md-8" data-aos="fade-up">
                  <p>Extended Kalman Filter Math: Imagine we have some sensor that provides the robot with some sort of input The sensor, at some #-hz polls, has noise. This can affect our calculations. Thus, we use a Kalman Filter to de-noise the input that we receive to have a smoother estimation of the reading. This involves a lot of linear algebra and multi-variable calculus. These equations are solely for my understanding. My code implementation follows this. </p>
                  <img src="assets/img/engineering_design_process/IMG_0167.jpg" alt="Image" class="img-responsive" width="900" height="900">
                </div>
                <br>
                <div class="col-md-8" data-aos="fade-up">
                  <p>4-Wheel Odometry w/ IMU on Extended Kalman Filter Calculations: This is the localization math assuming a 4-wheel odometry system combined with IMU/Vision (aka my dream software robot). We use this equation to derive the absolute world position of the robot. It seems like a mess on the board but the equations derive out of the position of the robot using Euler Integration. Then, we apply a Kalman Filter to the readings of the sensors and the various localization inputs we have. It seems complicated but simpler in code. </p>
                  <img src="assets/img/engineering_design_process/IMG_2976.jpeg" alt="Image" class="img-responsive" width="900" height="600">
                </div>
                <br>
                <p class="mb-4"><span class="text-muted">Cycle of Testing</span></p>

                <div class="mb-5">
                  <p>It is important to note that I could not put this work into full-fledged action. I focused a lot more on getting competition ready and finishing up the hardware of the bot. Some strides were made though, and it is noticeable through videos. 

                    While I unfortunately do not have many videos, here are some videos of Pure Pursuit w/ Motion Profiling in action:
                    
                    <ul>
                      <li><a href="https://youtube.com/shorts/Nb3B1qVzuJ4?feature=share">03/02/2022</a></li>
                      <li><a href="https://youtube.com/shorts/Ao7cicPBuB8?feature=share">03/04/2022</a></li>
                      <li><a href="https://youtu.be/ZaTuE4gfANk">03/05/2022</a></li>
                      
                    </ul>                  
                    It is hard to tell the actual speed of the robot at each frame but it is evident that the robot is speeding up and slowing down properly. The robot stopped smoothly where I wanted it to. This is something that would not be possible with basic pure pursuit. Hopefully, I can use this code to its full advantage assuming we are able to finish the actual robot on time. 
                    
                    <br>
                    <br>
                    Code: <a href="https://tinyurl.com/sanvyfch">https://tinyurl.com/sanvyfch</a>
                    
                  </p>

                </div>

                

                
              </div>
            </div>
          </div>
        </div>
    </section>

   

  <!-- ======= Footer ======= -->
  <footer class="footer" role="contentinfo">
    <div class="container">
      <div class="row">
        <div class="col-sm-6">
          <p class="mb-1">&copy; Copyright Washieu Anan. All Rights Reserved</p>
          <div class="credits">
       
        
            Designed by <a href="https://github.com/washieuanan">Washieu Anan</a>
          </div>
        </div>

      </div>
    </div>
  </footer>

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

</body>

</html>